@page "/auth/registration"
@using mudblazorclean.Application.DTOs.Requests.Auth
@using mudblazorclean.Application.Interfaces.Services.Authentication
@using mudblazorclean.Presentation.Components.Layout.Auth

@layout AuthLayout

@inject IAuthService _authenservice;
@inject NavigationManager _navManager;


@code {
    private RegistrationRequest request { get; set; } = new()
    {
        UserName = string.Empty,
        Email = string.Empty,
        Password = string.Empty,
        ConfirmPassword = string.Empty
    };

    public string? errorMessage;

    private async Task Register()
    {
        var response = await _authenservice.Registration(request);
        if (response.Success)
        {
            // Handle successful registration, e.g., redirect to login page or show success message
            _navManager.NavigateTo("/auth/login", forceLoad: true);
        }
        else
        {
            errorMessage = response.Message;
        }
    }
}